<?xml version="1.0" encoding="UTF-8"?>
		<!DOCTYPE mapper
		    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">    
<mapper namespace="com.goodee.home.store.product.ProductDAO">
	<insert id="setProduct" parameterType="ProductDTO">
		INSERT INTO PRODUCT VALUES (#{productNum}, #{price}, #{stock}, #{saleRate}, #{brand}, SYSDATE,
		#{deliDate}, #{todayDeal}, #{premium}, #{deliFee}, #{productName})
	</insert>
	
	<select id="getCategory" resultType="CategoryDTO">
		SELECT * FROM CATEGORY
	</select>
	
	<insert id="setCategory" parameterType="Cate_ProductDTO">
		INSERT INTO "CATE-PRODUCT" VALUES (CATE_SEQ.NEXTVAL, #{categoryNum}, #{productNum})
	</insert>
	
	<insert id="setOption1" parameterType="OptionDTO">
		INSERT INTO OPTION1 VALUES (OPTION_SEQ.NEXTVAL, #{optionName}, #{optionPrice}, #{productNum})
	</insert>
	
	<insert id="setOption2" parameterType="OptionDTO">
		INSERT INTO OPTION2 VALUES (OPTION_SEQ.NEXTVAL, #{optionName}, #{optionPrice}, #{productNum})
	</insert>
	
	<insert id="setOption3" parameterType="OptionDTO">
		INSERT INTO OPTION3 VALUES (OPTION_SEQ.NEXTVAL, #{optionName}, #{optionPrice}, #{productNum})
	</insert>
	
	<insert id="setProductImage" parameterType="ProductImageDTO">
		INSERT INTO PRODUCTIMAGE VALUES (FILE_SEQ.NEXTVAL, #{fileName}, #{oriName}, #{productNum}, #{detail})
	</insert>
	
	<select id="getExProductList" parameterType="ExhibitionDTO"
		resultMap="getExProductResult">
		SELECT P.*, I.FILENAME, I.FILENUM, I.ORINAME FROM "EX-PRODUCT" E
		JOIN PRODUCT P 
		ON P.PRODUCTNUM = E.PRODUCTNUM
		JOIN PRODUCTIMAGE I
		ON P.PRODUCTNUM = I.PRODUCTNUM
		WHERE E.EXHIBITIONCODE = #{exhibitionCode} AND I.ORINAME LIKE '01%'
	</select>
	
	<resultMap type="ProductDTO" id="getExProductResult">
		<id column="PRODUCTNUM" property="productNum"/>
		<result column="PRICE" property="price"/>
		<result column="STOCK" property="stock"/>
		<result column="SALERATE" property="saleRate"/>
		<result column="BRAND" property="brand"/>
		<result column="REGDATE" property="regDate"/>
		<result column="DELIDATE" property="deliDate"/>
		<result column="TODAYDEAL" property="todayDeal"/>
		<result column="PREMIUM" property="premium"/>
		<result column="DELIFEE" property="deliFee"/>
		<result column="PRODUCTNAME" property="productName"/>
		<association property="productImageDTO" javaType="ProductImageDTO">
			<id column="FILENUM" property="fileName"/>
			<result column="FILENAME" property="fileName"/>
			<result column="ORINAME" property="oriName"/>
		</association>
	</resultMap>
</mapper>