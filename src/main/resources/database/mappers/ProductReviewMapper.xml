<?xml version="1.0" encoding="UTF-8"?>
		<!DOCTYPE mapper
		    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">    
<mapper namespace="com.goodee.home.store.review.ProductReviewDAO">
	<insert id="addReview" parameterType="ProductReviewDTO">
		INSERT INTO PRODUCTREVIEW VALUES (REV_SEQ.NEXTVAL, #{durStar}, #{designStar}, #{priceStar}, #{deliveryStar},
		SYSDATE, #{fileName}, 0, #{contents}, #{productNum}, #{userId})
	</insert>
	
	<select id="getReview" parameterType="ProductReviewDTO" resultType="ProductReviewDTO">
		SELECT * FROM PRODUCTREVIEW WHERE PRODUCTNUM = #{productNum}
	</select>
	
	<select id="getGrade" resultType="Long" parameterType="ProductReviewDTO">
		SELECT ROUND((DURSTAR + DESIGNSTAR + PRICESTAR + DELIVERYSTAR)/4) as AVGSTAR FROM PRODUCTREVIEW
		WHERE PRODUCTNUM = #{productNum}
	</select>
</mapper>