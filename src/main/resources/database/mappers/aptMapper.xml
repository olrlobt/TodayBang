<?xml version="1.0" encoding="UTF-8"?>
		<!DOCTYPE mapper
		    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">    
<mapper namespace="com.goodee.home.apt.AptDAO">
	<select id="getAptRoadName" parameterType="AptDTO" resultType="AptDTO">
	
		SELECT BUILDINGNM,ROADNAME,SIGUNGU, AVG(DEPOSIT) DEPOSIT, AVG(WDEPOSIT) WDEPOSIT, AVG(MONTHLY) MONTHLY, AVG(AVG) AVG       
		FROM (SELECT BUILDINGNM,ROADNAME,SIGUNGU,DEALTYPE,AVG(DEPOSIT) DEPOSIT, AVG(WDEPOSIT) WDEPOSIT, AVG(MONTHLY) MONTHLY, AVG(DEAL) AVG
			  FROM (SELECT  *
		        		FROM REALESTATE 
		        		WHERE SIGUNGU LIKE '%'||#{sigungu}||'%')
					GROUP BY BUILDINGNM,ROADNAME,SIGUNGU,DEALTYPE)     
		GROUP BY BUILDINGNM,ROADNAME,SIGUNGU	
	</select>
	
	<select id="getList" parameterType="AptDTO" resultType="AptDTO">
		SELECT * FROM REALESTATE WHERE ROADNAME=#{roadName}
	</select>


</mapper>